# Lightsail + Nuxt 3 + Groongaæ§‹æˆã®è©•ä¾¡

**é–¢é€£Issue**: [#6 Dæ¡ˆï¼ˆã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚³ã‚¹ãƒˆæœ€é©åŒ–](https://github.com/hidezoh/dti-affi/issues/6)
**å‚è€ƒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: `minogashi-ssr`ï¼ˆè¦‹é€ƒã—é…ä¿¡æ¤œç´¢ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

---

## ğŸ“‹ æ§‹æˆæ¦‚è¦

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
[ãƒ¦ãƒ¼ã‚¶ãƒ¼]
    â†“
[Nginx (Lightsail)]
    â†“
[Nuxt 3 SSR (PM2 cluster)]
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â†“                           â†“
[Groonga]                [Redis]
(å…¨æ–‡æ¤œç´¢)               (Session/Cache)
    â†“
[Docker Container]
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | æŠ€è¡“ | å½¹å‰² |
|--------------|------|------|
| **ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°** | AWS Lightsail | VPS |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | Nuxt 3 + Vue 3 + Vuetify 3 | SSRã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ |
| **ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†** | PM2 (cluster mode) | Node.jsãƒ—ãƒ­ã‚»ã‚¹ç®¡ç† |
| **ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·** | Nginx | SSL/HTTPå‡¦ç† |
| **å…¨æ–‡æ¤œç´¢** | Groonga (Docker) | æ—¥æœ¬èªå…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ |
| **ã‚»ãƒƒã‚·ãƒ§ãƒ³/ã‚­ãƒ£ãƒƒã‚·ãƒ¥** | Redis (Docker) | ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆã‚¢ |
| **åˆ†æ** | Firebase Analytics | ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ†æ |

---

## ğŸ” Groongaã®æ—¥æœ¬èªæ¤œç´¢å®Ÿè£…

### Groongaã®ç‰¹å¾´

**Groongaã¨ã¯**:
- ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®å…¨æ–‡æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³
- MySQL/PostgreSQLã¨ã®çµ±åˆã‚‚å¯èƒ½ãªã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³å‹
- æ—¥æœ¬èªã«ç‰¹åŒ–ã—ãŸé«˜æ€§èƒ½ãªæ¤œç´¢æ©Ÿèƒ½
- HTTPãƒ™ãƒ¼ã‚¹ã®APIï¼ˆRESTfulï¼‰

### é«˜åº¦ãªæ—¥æœ¬èªæ¤œç´¢è¨­å®š

#### 1. 3ç¨®é¡ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥

```groonga
-- é€šå¸¸ã®å½¢æ…‹ç´ è§£æã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
table_create missed_program_multi_index TABLE_PAT_KEY ShortText
  --default_tokenizer "TokenMecab(\"include_reading\", true)"
  --normalizer NormalizerAuto

-- èª­ã¿ä»®åã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆã‚«ãƒŠæ¤œç´¢ï¼‰
table_create missed_program_yomi_multi_index TABLE_PAT_KEY ShortText
  --default_tokenizer "TokenMecab(\"use_reading\", true)"
  --normalizer NormalizerAuto

-- Bigramã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰
table_create missed_program_bigram_index TABLE_PAT_KEY ShortText
  --default_tokenizer TokenBigram
  --normalizer NormalizerAuto
```

**ç‰¹å¾´**:
- **TokenMecab**: MeCabã«ã‚ˆã‚‹å½¢æ…‹ç´ è§£æï¼ˆåè©æŠ½å‡ºï¼‰
- **use_reading**: ã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠã§ã®æ¤œç´¢å¯¾å¿œ
- **TokenBigram**: 2æ–‡å­—å˜ä½ã§ã®éƒ¨åˆ†ä¸€è‡´æ¤œç´¢

#### 2. æ­£è¦åŒ–ã¨ãƒ•ã‚£ãƒ«ã‚¿

```groonga
--normalizer NormalizerAuto
--token_filters "TokenFilterNFKC150(\"unify_kana\", true, \"unify_kana_case\", true, \"unify_hyphen\", true)"
```

**åŠ¹æœ**:
- å…¨è§’åŠè§’ã®çµ±ä¸€
- ã‚«ã‚¿ã‚«ãƒŠãƒ»ã²ã‚‰ãŒãªã®çµ±ä¸€
- ãƒã‚¤ãƒ•ãƒ³ãƒ»é•·éŸ³è¨˜å·ã®çµ±ä¸€
- å¤§æ–‡å­—å°æ–‡å­—ã®çµ±ä¸€

#### 3. ã‚¯ã‚¨ãƒªæœ€é©åŒ–ï¼ˆminogashi-ssrã®å®Ÿè£…ï¼‰

```typescript
function optimizeMatchColumns(query: string): string {
  const baseColumns = [
    'missed_program_multi_index.multi_index',           // å½¢æ…‹ç´ è§£æ
    'missed_program_yomi_multi_index.yomi_multi_index', // èª­ã¿ä»®å
    'missed_program_bigram_index.multi_bigram_index'    // Bigram
  ];

  // çŸ­ã„ã‚¯ã‚¨ãƒªï¼ˆ1-2æ–‡å­—ï¼‰: Bigramå„ªå…ˆ
  if (query.length <= 2) {
    return [baseColumns[2], baseColumns[0], baseColumns[1]].join('||');
  }

  // è‹±æ•°å­—ã®ã¿: é€šå¸¸ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å„ªå…ˆ
  if (/^[a-zA-Z0-9\s]+$/.test(query)) {
    return [baseColumns[0], baseColumns[2], baseColumns[1]].join('||');
  }

  // ã²ã‚‰ãŒãªãƒ»ã‚«ã‚¿ã‚«ãƒŠå«ã‚€: èª­ã¿ä»®åã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å„ªå…ˆ
  if (/[\u3040-\u309F\u30A0-\u30FF]/.test(query)) {
    return [baseColumns[1], baseColumns[0], baseColumns[2]].join('||');
  }

  return baseColumns.join('||');
}
```

**åŠ¹æœ**: ã‚¯ã‚¨ãƒªã®ç‰¹æ€§ã«å¿œã˜ãŸæœ€é©ãªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹é¸æŠã§æ¤œç´¢ç²¾åº¦ã¨é€Ÿåº¦ã‚’å‘ä¸Š

---

## ğŸ’° ã‚³ã‚¹ãƒˆåˆ†æ

### AWS Lightsailã®æ–™é‡‘

| ãƒ—ãƒ©ãƒ³ | CPU | ãƒ¡ãƒ¢ãƒª | ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | è»¢é€é‡ | æœˆé¡æ–™é‡‘ |
|--------|-----|--------|-----------|--------|----------|
| **$5** | 1ã‚³ã‚¢ | 512MB | 20GB SSD | 1TB | **ç´„Â¥750** |
| **$10** | 1ã‚³ã‚¢ | 1GB | 40GB SSD | 2TB | **ç´„Â¥1,500** |
| **$20** | 2ã‚³ã‚¢ | 2GB | 60GB SSD | 3TB | **ç´„Â¥3,000** |
| **$40** | 2ã‚³ã‚¢ | 4GB | 80GB SSD | 4TB | **ç´„Â¥6,000** |

### dti-affiãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æƒ³å®šã‚³ã‚¹ãƒˆ

**æ¨å¥¨ãƒ—ãƒ©ãƒ³**: $20 (2ã‚³ã‚¢ã€2GBãƒ¡ãƒ¢ãƒª)

| é …ç›® | æœˆé¡ã‚³ã‚¹ãƒˆ |
|------|-----------|
| **Lightsail $20ãƒ—ãƒ©ãƒ³** | ç´„Â¥3,000 |
| **SSLè¨¼æ˜æ›¸** | Â¥0ï¼ˆLet's Encryptï¼‰ |
| **ãƒ‰ãƒ¡ã‚¤ãƒ³** | Â¥0ï¼ˆæ—¢å­˜æƒ³å®šï¼‰ |
| **Firebase** | Â¥0ï¼ˆç„¡æ–™æ å†…ï¼‰ |
| **åˆè¨ˆ** | **ç´„Â¥3,000/æœˆ** |

### ä»–ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®æ¯”è¼ƒ

| ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ | æœˆé¡ã‚³ã‚¹ãƒˆ | æ—¥æœ¬èªæ¤œç´¢ç²¾åº¦ | å®Ÿè£…å·¥æ•° |
|--------------|-----------|---------------|---------|
| **Lightsail + Groonga** | ç´„Â¥3,000 | **85-90%** â­â­â­â­ | é«˜ï¼ˆ2-3é€±é–“ï¼‰ |
| **Meilisearch + CF** | ç´„Â¥5,000 | è‰¯å¥½ï¼ˆæ”¹å–„ä¸­ï¼‰ â­â­â­ | ä¸­ï¼ˆ1-2é€±é–“ï¼‰ |
| **Convex** | Â¥0-9,750 | 30-40% â­ | ä½ï¼ˆ1é€±é–“ï¼‰ |
| **Algolia** | Â¥15,000-50,000 | 90-95% â­â­â­â­â­ | ä½ï¼ˆ1é€±é–“ï¼‰ |

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ

### minogashi-ssrã§ã®å®Ÿæ¸¬å€¤

**æ¤œç´¢ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**:
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆæ™‚: **5-10ms**
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹æ™‚: **30-100ms**
- è¤‡é›‘ãªã‚¯ã‚¨ãƒª: **100-200ms**

**æœ€é©åŒ–æ‰‹æ³•**:
1. **Redisã‚­ãƒ£ãƒƒã‚·ãƒ¥**: 5åˆ†TTLã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ 70-80%
2. **PM2ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒ¢ãƒ¼ãƒ‰**: CPUã‚³ã‚¢æ•°ã«å¿œã˜ãŸä¸¦åˆ—å‡¦ç†
3. **Nginxãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·**: é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥
4. **ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–**: ã‚¯ã‚¨ãƒªç‰¹æ€§ã«å¿œã˜ãŸå‹•çš„é¸æŠ

### dti-affiã§ã®æƒ³å®šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

**ãƒ‡ãƒ¼ã‚¿è¦æ¨¡**: 119,176ä»¶

| é …ç›® | æƒ³å®šå€¤ | å‚™è€ƒ |
|------|--------|------|
| **åˆå›æ¤œç´¢** | 50-150ms | Groongaæ¤œç´¢ + ãƒ‡ãƒ¼ã‚¿å¤‰æ› |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ** | 10-30ms | RedisçµŒç”± |
| **åŒæ™‚æ¥ç¶š** | 50-100ãƒ¦ãƒ¼ã‚¶ãƒ¼ | $20ãƒ—ãƒ©ãƒ³æƒ³å®š |
| **å¿œç­”ç‡** | 99.5%+ | Nginxã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šæ¬¡ç¬¬ |

---

## âœ… ãƒ¡ãƒªãƒƒãƒˆ

### 1. æ—¥æœ¬èªæ¤œç´¢ã®åœ§å€’çš„ãªå“è³ª

**Groongaã®å¼·ã¿**:
- âœ… **MeCabå½¢æ…‹ç´ è§£æ**: ã€Œå¥³å„ªåå‰ã€â†’ã€Œå¥³å„ªã€ã€Œåå‰ã€ã«åˆ†è§£
- âœ… **èª­ã¿ä»®åæ¤œç´¢**: ã€Œã‚ã‚„ã›ã¯ã‚‹ã‹ã€â†’ã€Œç¶¾ç€¬ã¯ã‚‹ã‹ã€ã«ãƒ’ãƒƒãƒˆ
- âœ… **è¡¨è¨˜ã‚†ã‚Œå¯¾å¿œ**: å…¨è§’åŠè§’ã€ã‚«ãƒŠã²ã‚‰ãŒãªã€ãƒã‚¤ãƒ•ãƒ³çµ±ä¸€
- âœ… **Bigraméƒ¨åˆ†ä¸€è‡´**: çŸ­ã„ã‚¯ã‚¨ãƒªã§ã‚‚é«˜ç²¾åº¦
- âœ… **è¾æ›¸ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: ç‹¬è‡ªè¾æ›¸ã®è¿½åŠ å¯èƒ½

**æ¤œç´¢ç²¾åº¦**: **85-90%** (Convex 30-40%ã€Meilisearch è‰¯å¥½ã€Algolia 90-95%)

### 2. ã‚³ã‚¹ãƒˆåŠ¹ç‡

- **æœˆé¡ç´„Â¥3,000**: Meilisearch + CF (Â¥5,000)ã‚ˆã‚Šå®‰ã„
- **ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹**: Groongaãƒ©ã‚¤ã‚»ãƒ³ã‚¹æ–™ãªã—
- **ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ãŒå®¹æ˜“**: Lightsailãƒ—ãƒ©ãƒ³ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã§å¯¾å¿œ
- **Issue #6 Phase 2äºˆç®—ï¼ˆÂ¥6,750ï¼‰å†…**: ä½™è£•ã‚ã‚Š

### 3. ãƒ•ãƒ«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«

- âœ… VPSç’°å¢ƒã§ã®å®Œå…¨ãªç®¡ç†æ¨©é™
- âœ… ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè‡ªç”±åº¦ãŒé«˜ã„
- âœ… ã‚¤ãƒ³ãƒ•ãƒ©å…¨ä½“ã®æŠŠæ¡ãŒå®¹æ˜“
- âœ… ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒç›´æ¥å¯èƒ½

### 4. æ—¢å­˜ã®å®Ÿç¸¾ã¨çŸ¥è¦‹

- âœ… minogashi-ssrã§ã®æœ¬ç•ªé‹ç”¨å®Ÿç¸¾
- âœ… å®Ÿè£…ãƒã‚¦ãƒã‚¦ãŒè“„ç©æ¸ˆã¿
- âœ… ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°çŸ¥è¦‹ã‚ã‚Š
- âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°çµŒé¨“

### 5. ãƒãƒƒãƒå‡¦ç†ã®å®¹æ˜“ã•

```bash
# CSVã‹ã‚‰Groongaã¸ã®ç›´æ¥æŠ•å…¥
groonga /path/to/db/db load --table videos < data.csv
```

- âœ… SQLiteã¨åŒæ§˜ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
- âœ… ãƒãƒƒãƒã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã®è‡ªå‹•æ›´æ–°
- âœ… ãƒ‡ãƒ¼ã‚¿æŠ•å…¥é€Ÿåº¦: æ•°ç§’ã€œæ•°åç§’ï¼ˆ119,176ä»¶ï¼‰

---

## âŒ ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

### 1. é‹ç”¨è² è·ã®é«˜ã•

**ç®¡ç†ãŒå¿…è¦ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**:
- âŒ OSï¼ˆUbuntuï¼‰ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
- âŒ Nginxè¨­å®šç®¡ç†
- âŒ PM2ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–
- âŒ Groonga/Redisã‚³ãƒ³ãƒ†ãƒŠç®¡ç†
- âŒ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒé©ç”¨
- âŒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥

**Meilisearch + CFã¨ã®æ¯”è¼ƒ**:
- Meilisearch + CF: ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ï¼ˆé‹ç”¨è² è·ã»ã¼ã‚¼ãƒ­ï¼‰
- Lightsail + Groonga: VPSç®¡ç†ãŒå¿…è¦ï¼ˆæœˆæ•°æ™‚é–“ã€œï¼‰

### 2. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®é™ç•Œ

**å‚ç›´ã‚¹ã‚±ãƒ¼ãƒ«ã®ã¿**:
- âŒ Lightsailã¯å‚ç›´ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆãƒ—ãƒ©ãƒ³ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ï¼‰ã®ã¿
- âŒ æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆè¤‡æ•°ã‚µãƒ¼ãƒãƒ¼ï¼‰ã¯å›°é›£
- âŒ ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯æ€¥å¢—æ™‚ã®æŸ”è»Ÿæ€§ã«æ¬ ã‘ã‚‹

**Cloudflareã¨ã®æ¯”è¼ƒ**:
- Cloudflare: ç„¡é™ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆè‡ªå‹•ï¼‰
- Lightsail: æœ€å¤§$640ãƒ—ãƒ©ãƒ³ï¼ˆ32GB RAMï¼‰ã§ä¸Šé™

### 3. é«˜å¯ç”¨æ€§ã®ç¢ºä¿ãŒå›°é›£

**ã‚·ãƒ³ã‚°ãƒ«ãƒã‚¤ãƒ³ãƒˆéšœå®³**:
- âŒ 1å°ã®Lightsailã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ä¾å­˜
- âŒ ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ãƒªã‚¹ã‚¯ã‚ã‚Š
- âŒ ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼æ§‹æˆãŒè¤‡é›‘

**å¯¾ç­–ã®å¿…è¦æ€§**:
- ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆæ‰‹å‹•ã¾ãŸã¯è‡ªå‹•åŒ–ï¼‰
- ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒãƒ¼æˆ¦ç•¥ã®æ¤œè¨

### 4. å®Ÿè£…å·¥æ•°ã®å¤§ãã•

**å¿…è¦ãªå®Ÿè£…ã‚¿ã‚¹ã‚¯**:
1. Lightsailã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ§‹ç¯‰ï¼ˆ1æ—¥ï¼‰
2. Dockerç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ0.5æ—¥ï¼‰
3. Groongaã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆãƒ»æŠ•å…¥ï¼ˆ2-3æ—¥ï¼‰
4. Nuxt 3 APIå®Ÿè£…ï¼ˆ3-5æ—¥ï¼‰
5. Redisçµ±åˆï¼ˆ1æ—¥ï¼‰
6. Nginxè¨­å®šï¼ˆ0.5æ—¥ï¼‰
7. PM2è¨­å®šï¼ˆ0.5æ—¥ï¼‰
8. SSL/ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®šï¼ˆ0.5æ—¥ï¼‰
9. ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒãƒƒã‚°ï¼ˆ2-3æ—¥ï¼‰
10. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆï¼ˆ1-2æ—¥ï¼‰

**åˆè¨ˆ**: **2-3é€±é–“** (Meilisearch + CF: 1-2é€±é–“)

### 5. SSRãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®è¤‡é›‘æ€§

**Nuxt 3ã®å­¦ç¿’ã‚³ã‚¹ãƒˆ**:
- âŒ ç¾åœ¨ã®dti-affiã¯Next.js 16
- âŒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç§»è¡Œã®å·¥æ•°
- âŒ Nuxt 3ç‰¹æœ‰ã®æ¦‚å¿µï¼ˆNitroã€useAsyncDataç­‰ï¼‰

---

## ğŸ¯ dti-affiãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®é©ç”¨è©•ä¾¡

### æŠ€è¡“çš„é©åˆæ€§

| é …ç›® | è©•ä¾¡ | å‚™è€ƒ |
|------|------|------|
| **æ—¥æœ¬èªæ¤œç´¢å“è³ª** | â­â­â­â­â­ | Groongaã¯æœ€é«˜ãƒ¬ãƒ™ãƒ« |
| **ã‚³ã‚¹ãƒˆ** | â­â­â­â­ | Phase 2äºˆç®—å†…ï¼ˆÂ¥3,000/æœˆï¼‰ |
| **å®Ÿè£…å·¥æ•°** | â­â­ | 2-3é€±é–“å¿…è¦ |
| **é‹ç”¨è² è·** | â­â­ | VPSç®¡ç†ãŒå¿…è¦ |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | â­â­ | å‚ç›´ã‚¹ã‚±ãƒ¼ãƒ«ã®ã¿ |
| **æ—¢å­˜ã‚¹ã‚¿ãƒƒã‚¯ã¨ã®è¦ªå’Œæ€§** | â­â­ | Next.jsâ†’Nuxtç§»è¡ŒãŒå¿…è¦ |

### Issue #6ã®è¦ä»¶ã¨ã®ç…§ã‚‰ã—åˆã‚ã›

#### Phase 1ï¼ˆã€œ1ä¸‡PVã€æœˆé¡Â¥0ï¼‰: âŒ ä¸é©åˆ

**ç†ç”±**:
- æœ€ä½ã§ã‚‚æœˆé¡Â¥3,000å¿…è¦ï¼ˆLightsail $20ãƒ—ãƒ©ãƒ³ï¼‰
- Phase 1ã®ã€ŒåˆæœŸæŠ•è³‡ã‚¼ãƒ­ã€æ–¹é‡ã«åã™ã‚‹

#### Phase 2ï¼ˆã€œ10ä¸‡PVã€æœˆé¡Â¥6,750ç›®æ¨™ï¼‰: âœ… é©åˆå¯èƒ½

**ç†ç”±**:
- âœ… æœˆé¡Â¥3,000ï¼ˆäºˆç®—å†…ï¼‰
- âœ… æ—¥æœ¬èªæ¤œç´¢å“è³ªãŒé«˜ã„
- âš ï¸ å®Ÿè£…å·¥æ•°ãŒå¤§ãã„ï¼ˆ2-3é€±é–“ï¼‰
- âš ï¸ é‹ç”¨è² è·ãŒç™ºç”Ÿ

#### Phase 3ï¼ˆ10ä¸‡PVã€œã€æœˆé¡Â¥22,500ç›®æ¨™ï¼‰: âš ï¸ é™å®šçš„ã«é©åˆ

**ç†ç”±**:
- âš ï¸ ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®é™ç•Œï¼ˆå‚ç›´ã‚¹ã‚±ãƒ¼ãƒ«ã®ã¿ï¼‰
- âš ï¸ é«˜å¯ç”¨æ€§ç¢ºä¿ãŒå›°é›£
- âœ… ã‚³ã‚¹ãƒˆã¯äºˆç®—å†…ï¼ˆ$40ãƒ—ãƒ©ãƒ³ã§Â¥6,000ï¼‰

---

## ğŸ“Š ç·åˆè©•ä¾¡ã¨æ¨å¥¨

### ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼ˆ5ç‚¹æº€ç‚¹ï¼‰

| è©•ä¾¡é …ç›® | Lightsail + Groonga | Meilisearch + CF |
|---------|-------------------|------------------|
| **æ—¥æœ¬èªæ¤œç´¢å“è³ª** | â­â­â­â­â­ (5.0) | â­â­â­ (3.5) |
| **ã‚³ã‚¹ãƒˆåŠ¹ç‡** | â­â­â­â­ (4.0) | â­â­â­ (3.5) |
| **å®Ÿè£…ã®å®¹æ˜“ã•** | â­â­ (2.0) | â­â­â­â­ (4.0) |
| **é‹ç”¨è² è·** | â­â­ (2.0) | â­â­â­â­â­ (5.0) |
| **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£** | â­â­ (2.0) | â­â­â­â­â­ (5.0) |
| **å°†æ¥æ‹¡å¼µæ€§** | â­â­â­ (3.0) | â­â­â­â­â­ (5.0) |
| **åˆè¨ˆ** | **18/30** | **26/30** |

### æ¨å¥¨åˆ¤å®š

#### **Meilisearch + Cloudflareã‚’æ¨å¥¨ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ææ¡ˆï¼‰**

**ç†ç”±**:
1. **é‹ç”¨è² è·ãŒã»ã¼ã‚¼ãƒ­**: ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
2. **ç„¡é™ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: Cloudflareã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ 
3. **å®Ÿè£…å·¥æ•°ãŒå°‘ãªã„**: 1-2é€±é–“
4. **é«˜å¯ç”¨æ€§**: ã‚µãƒ¼ãƒ“ã‚¹ãƒ€ã‚¦ãƒ³ã®ãƒªã‚¹ã‚¯ãŒä½ã„
5. **å°†æ¥ã®æ‹¡å¼µæ€§**: Algoliaç­‰ã¸ã®ç§»è¡Œã‚‚å®¹æ˜“

**æ—¥æœ¬èªæ¤œç´¢å“è³ªã«ã¤ã„ã¦**:
- Meilisearchã‚‚è‰¯å¥½ï¼ˆLinderaå½¢æ…‹ç´ è§£æï¼‰
- Groongaã»ã©é«˜åº¦ã§ã¯ãªã„ãŒã€å®Ÿç”¨ååˆ†
- ç¶™ç¶šçš„ã«æ”¹å–„ä¸­

### Lightsail + GroongaãŒé©ã™ã‚‹ã‚±ãƒ¼ã‚¹

ä»¥ä¸‹ã®æ¡ä»¶ã‚’**ã™ã¹ã¦æº€ãŸã™å ´åˆã®ã¿**æ¤œè¨ä¾¡å€¤ã‚ã‚Š:

1. **æ—¥æœ¬èªæ¤œç´¢å“è³ªãŒæœ€å„ªå…ˆ**
   - æ¤œç´¢ç²¾åº¦85-90%ãŒå¿…é ˆè¦ä»¶
   - Meilisearchã®ã€Œè‰¯å¥½ã€ãƒ¬ãƒ™ãƒ«ã§ã¯ä¸ååˆ†

2. **VPSé‹ç”¨ã®çµŒé¨“ã¨ãƒªã‚½ãƒ¼ã‚¹ãŒã‚ã‚‹**
   - ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ã®çŸ¥è­˜ãƒ»çµŒé¨“ãŒã‚ã‚‹
   - æœˆæ•°æ™‚é–“ã®é‹ç”¨ä½œæ¥­ãŒå¯èƒ½

3. **ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒäºˆæ¸¬å¯èƒ½**
   - æ€¥æ¿€ãªãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯å¢—åŠ ãŒãªã„
   - æ®µéšçš„ãªã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—ã§å¯¾å¿œå¯èƒ½

4. **åˆæœŸæŠ•è³‡ã‚’è¨±å®¹ã§ãã‚‹**
   - 2-3é€±é–“ã®å®Ÿè£…å·¥æ•°ã‚’ç¢ºä¿ã§ãã‚‹
   - Phase 1ã‹ã‚‰æœˆé¡Â¥3,000ã‚’æ”¯æ‰•ãˆã‚‹

**dti-affiãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¾çŠ¶ã§ã¯ã€ã“ã‚Œã‚‰ã®æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ãªã„**ãŸã‚ã€Meilisearch + Cloudflareæ§‹æˆã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

## ğŸ”„ ä»£æ›¿æ¡ˆï¼šãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æˆ¦ç•¥

### æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

**Phase 1-2**: Meilisearch + Cloudflare
- ä½ã‚³ã‚¹ãƒˆãƒ»ä½é‹ç”¨è² è·ã§ã‚¹ã‚¿ãƒ¼ãƒˆ
- æ—¥æœ¬èªæ¤œç´¢ã‚’ã€Œè‰¯å¥½ã€ãƒ¬ãƒ™ãƒ«ã§æä¾›

**Phase 3ä»¥é™**: Groongaç§»è¡Œã‚’æ¤œè¨
- åç›ŠãŒå®‰å®šã—ã€é‹ç”¨ãƒªã‚½ãƒ¼ã‚¹ãŒç¢ºä¿ã§ããŸæ®µéš
- æœ€é«˜å“è³ªã®æ—¥æœ¬èªæ¤œç´¢ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹å ´åˆ
- VPSç®¡ç†ã®ä½“åˆ¶ãŒæ•´ã£ãŸå ´åˆ

### Groonga on Cloudflareï¼ˆå‚è€ƒï¼‰

**ç†è«–çš„ã«ã¯å¯èƒ½ãªæ§‹æˆ**:
```
Cloudflare Workers â†’ Groonga (Lightsail/åˆ¥VPS)
```

- Cloudflareã§æ¤œç´¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆå—ä»˜
- Groongaã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã¨ã—ã¦åˆ©ç”¨
- ä¸¡æ–¹ã®åˆ©ç‚¹ã‚’çµ„ã¿åˆã‚ã›

**èª²é¡Œ**:
- Groongaç®¡ç†ã¯ä¾ç„¶ã¨ã—ã¦å¿…è¦
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ã®å¢—åŠ 
- è¤‡é›‘æ€§ã®ä¸Šæ˜‡

---

## ğŸ“š å‚è€ƒæƒ…å ±

### Groongaå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Groonga](https://groonga.org/)
- [Groongaæ—¥æœ¬èªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://groonga.org/ja/)

### AWS Lightsail
- [Lightsailæ–™é‡‘](https://aws.amazon.com/jp/lightsail/pricing/)
- [Lightsailãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.aws.amazon.com/lightsail/)

### å®Ÿè£…å‚è€ƒ
- minogashi-ssrãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: `/Users/katouhideyuki/development/minogashi-ssr`

---

## âœ… çµè«–

**dti-affiãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€Meilisearch + Cloudflareæ§‹æˆã‚’æ¨å¥¨ã—ã¾ã™ã€‚**

### æ¨å¥¨ç†ç”±

1. **Issue #6ã®è¦ä»¶ã«æœ€é©**
   - Phase 1: ç„¡æ–™é‹ç”¨å¯èƒ½
   - Phase 2: æœˆé¡Â¥5,000ï¼ˆäºˆç®—å†…ï¼‰
   - Phase 3: ç„¡é™ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

2. **é‹ç”¨è² è·ã®æœ€å°åŒ–**
   - ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹
   - ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†ä¸è¦
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒè‡ªå‹•é©ç”¨

3. **å®Ÿè£…å·¥æ•°ã®å‰Šæ¸›**
   - 1-2é€±é–“ã§å®Ÿè£…å¯èƒ½
   - Next.js 16ã¨ã®è¦ªå’Œæ€§
   - æ—¢å­˜ã®Vercelç’°å¢ƒã¨çµ±åˆå¯èƒ½

4. **å°†æ¥ã®æ‹¡å¼µæ€§**
   - ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯å¢—åŠ ã«è‡ªå‹•å¯¾å¿œ
   - é«˜å¯ç”¨æ€§ä¿è¨¼
   - Algoliaç­‰ã¸ã®ç§»è¡Œã‚‚å®¹æ˜“

**Lightsail + Groongaæ§‹æˆã¯ã€æŠ€è¡“çš„ã«ã¯éå¸¸ã«å„ªã‚Œã¦ã„ã¾ã™ãŒã€dti-affiãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¾çŠ¶ï¼ˆPhase 1ç„¡æ–™é‹ç”¨ã€é‹ç”¨ãƒªã‚½ãƒ¼ã‚¹é™å®šï¼‰ã«ã¯ä¸é©åˆã§ã™ã€‚**

åç›ŠãŒå®‰å®šã—ã€æœ€é«˜å“è³ªã®æ—¥æœ¬èªæ¤œç´¢ãŒå¿…é ˆè¦ä»¶ã¨ãªã£ãŸæ®µéšï¼ˆPhase 3ä»¥é™ï¼‰ã§ã€æ”¹ã‚ã¦æ¤œè¨ã™ã‚‹ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚

---

**ä½œæˆæ—¥**: 2025å¹´12æœˆ5æ—¥
**è©•ä¾¡å¯¾è±¡**: Lightsail + Nuxt 3 + Groongaæ§‹æˆ
**çµè«–**: Meilisearch + Cloudflareæ§‹æˆã‚’æ¨å¥¨ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ææ¡ˆï¼‰
**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- [Issue #6æ¤œè¨çµŒç·¯ã¾ã¨ã‚](./issue-6-discussion-summary.md)
- [Meilisearchãƒãƒƒãƒæ›´æ–°æˆ¦ç•¥](./meilisearch-batch-update-strategy.md)
